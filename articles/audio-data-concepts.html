<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="wildRtrax">
<title>Audio data concepts • wildRtrax</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Audio data concepts">
<meta property="og:description" content="wildRtrax">
<meta property="og:image" content="https://abbiodiversity.github.io/wildRtrax/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">wildRtrax</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/introduction.html">Introduction</a>
    <a class="dropdown-item" href="../articles/audio-data-concepts.html">Audio data concepts</a>
    <a class="dropdown-item" href="../articles/apis.html">APIs</a>
    <a class="dropdown-item" href="../articles/acoustic-pre-processing.html">Acoustic pre-processing</a>
    <a class="dropdown-item" href="../articles/acoustic-data-wrangling.html">Acoustic data wrangling</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <h6 class="dropdown-header" data-toc-skip>wildRtrax 1.0.1</h6>
    <h6 class="dropdown-header" data-toc-skip>wildRtrax 1.0.0</h6>
    <h6 class="dropdown-header" data-toc-skip>wildRtrax 0.1.0</h6>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Audio data concepts</h1>
            
      
      
      <div class="d-none name"><code>audio-data-concepts.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="audio-data-management">Audio data management<a class="anchor" aria-label="anchor" href="#audio-data-management"></a>
</h2>
<p>Autonomous recording units (ARUs) and remote cameras collect data on
the environment by means of capturing acoustic or visual signals,
respectively. ARUs are used to survey a variety of species such as
birds, amphibians, and bats, since these taxa give reliable,
identifiable signals. These signals are produced for activities, such
as, territory defense or mating. Environmental sensors are designed to
record sound or images autonomously for long periods of time, which can
accrue a large amount of data.</p>
<div class="section level3">
<h3 id="audio-file-formats">Audio file formats<a class="anchor" aria-label="anchor" href="#audio-file-formats"></a>
</h3>
<p>There are three major audio file types used within the
<strong>wildRtrax</strong>: <em>wac</em>, <em>flac</em> and
<em>wav</em></p>
<ul>
<li>
<em>wac</em> is a proprietary, lossless compressed file format
developed by <a href="https://www.wildlifeacoustics.com/" class="external-link">Wildlife
Acoustics</a>
</li>
<li>
<em>wav</em> is the standard, ubiquitous uncompressed audio file
format</li>
<li>
<em>flac</em> a lossless compressed format</li>
</ul>
<p>You might also be working with <em>mp3</em> which is a lossy
compressed audio file format.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_ls.html" class="external-link">dir_ls</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"."</span>, regexp <span class="op">=</span> <span class="st">"*.wav"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">wave_t</span> <span class="op">&lt;-</span> <span class="fu">tuneR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tuneR/man/readWave.html" class="external-link">readWave</a></span><span class="op">(</span><span class="va">file</span>, header <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="co">#True header format</span></span>
<span></span>
<span><span class="va">wave_f</span> <span class="op">&lt;-</span> <span class="fu">tuneR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tuneR/man/readWave.html" class="external-link">readWave</a></span><span class="op">(</span><span class="va">file</span>, header <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">wave_t</span>, <span class="va">wave_f</span><span class="op">)</span></span></code></pre></div>
<p>You can access the <em>objects</em> in <code>wave_t</code> through a
<code>$</code> as you would a normal list. When
<code>header = FALSE</code> and you are reading in the entire wav file,
you can access <em>slots</em> of the <code>S4</code> object using
<code>@</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sound_length_S4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="op">(</span><span class="va">wave_f</span><span class="op">@</span><span class="va">left</span> <span class="op">/</span> <span class="va">wave_f</span><span class="op">@</span><span class="va">samp.rate</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Is equivalent to:</span></span>
<span><span class="va">sound_length_list</span> <span class="op">&lt;-</span> <span class="va">wave_t</span><span class="op">$</span><span class="va">samples</span> <span class="op">/</span> <span class="va">wave_t</span><span class="op">$</span><span class="va">sample.rate</span></span>
<span></span>
<span><span class="va">sound_length_list</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="spectrograms">Spectrograms<a class="anchor" aria-label="anchor" href="#spectrograms"></a>
</h3>
<p>A <em>spectrogram</em> is a visual representation of the spectrum of
frequencies of an audio signal as it varies with time (<a href="https://en.wikipedia.org/wiki/Spectrogram" class="external-link">Wikipedia</a>). A
<strong>Fast-Fourier Transform</strong> is what converts a waveform into
a spectrogram. Spectrograms can be used to identify wildlife and other
signals by their unique spectral signature. Generally speaking, there
are three pieces of information you can use when identifying a signal
from a spectrogram:</p>
<ul>
<li>Length in time (e.g. seconds, minutes) of the signal via the
x-axis</li>
<li>Frequency range of the signal via the y-axis in Hz (hertz)</li>
<li>Relative amplitude of the signal via the z-axis in dBFS (decibels
relative to full scale)</li>
</ul>
<p>The maximum frequency of a spectrogram is always the sample rate / 2,
which is also called the <strong>Nyquist Frequency</strong>.</p>
<p>Let’s create a spectrogram to get a better look at some of those
audio files. Here’s one way to do it using <code>ggspectro</code> in
<code>seewave</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Plot a spectrogram</span></span>
<span><span class="va">v</span> <span class="op">&lt;-</span> <span class="fu">seewave</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/seewave/man/ggspectro.html" class="external-link">ggspectro</a></span><span class="op">(</span><span class="fu">tuneR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tuneR/man/readWave.html" class="external-link">readWave</a></span><span class="op">(</span><span class="va">file</span>, from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">60</span>, units <span class="op">=</span> <span class="st">"seconds"</span><span class="op">)</span>, ovlp <span class="op">=</span> <span class="fl">50</span><span class="op">)</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_tile</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>fill<span class="op">=</span><span class="va">amplitude</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><a href="http://sox.sourceforge.net/" class="external-link"><strong>SoX</strong></a> is
also a very powerful command line tool that can build spectrograms as
well. Processing time here is much faster given R doesn’t have to read
in the file as an S4 wave object. More on this later.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Or try a bash command using SoX</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#cd /path/to/file &amp;&amp; for file in *.wav; do outfile="${file%.*}.png"; title_in_pic="${file%.*}"; sox "$file" -n spectrogram -l -m -t "$title_in_pic" -o "$outfile"; done</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="from-the-field-to-the-office">From the field to the office<a class="anchor" aria-label="anchor" href="#from-the-field-to-the-office"></a>
</h3>
<p>Familiarity with processes, protocols, equipment and data is an
important first step in understanding how to manage environmental sensor
data. Check with your study design or monitoring plan to ensure that you
are correctly managing your data prior to heading into the field.
<strong>wildRtrax</strong> doesn’t focus on the field components of the
data flows but is heavily dependent on it. Acoustic data has certain
metadata dependencies that can be extracted from raw data. But robust
field or <a href="https://www.wildtrax.ca/home/resources/guide/organizations/visits.html" class="external-link"><em>visit</em></a>
metadata is important to support the quality control process of the
media.</p>
</div>
<div class="section level3">
<h3 id="metadata-dependencies-for-acoustic-data">Metadata dependencies for acoustic data<a class="anchor" aria-label="anchor" href="#metadata-dependencies-for-acoustic-data"></a>
</h3>
<p>The <strong>wildRtrax</strong> prefers that the file name string from
which the data is deriving is composed of two parts: a <em>spatial</em>
component and a <em>temporal</em> component. We call these fields the <a href="https://www.wildtrax.ca/home/resources/guide/organizations/locations.html" class="external-link"><em>location</em></a>
and the <em>recording_date_time</em> of the audio respectively. The
location, date and time should be critical pieces of information that
should be collected and checked when you are visiting environmental
sensors in the field.</p>
</div>
<div class="section level3">
<h3 id="data-volume-storage-and-computing-power">Data volume, storage and computing power<a class="anchor" aria-label="anchor" href="#data-volume-storage-and-computing-power"></a>
</h3>
<p>Collecting lots of data with environmental sensors is easy. Are there
ways you can reduce what you collect and have to process?</p>
<ul>
<li>
<em>Are you interested in one or many species?</em>
<ul>
<li>A community analysis would require a broad spectrum range to record
in or analyze or with more data being collected to account for imperfect
detection. Whereas with a single or multi-species approach, you may only
need to look at a narrow frequency range in order to detect the
species.</li>
</ul>
</li>
<li>
<em>What frequency range does your species vocalize in?</em>
<ul>
<li>If you know the frequency range your species vocalizes in, you may
be able to <em>change the sampling rate</em>, apply a <em>band-pass
filter</em> or <em>compress the data</em>
</li>
</ul>
</li>
<li>
<em>Data quality or data volume?</em>
<ul>
<li>All methods above will inherently reduce data quality in favour of
also reducing data volume. With more complex acoustic information comes
larger files.</li>
</ul>
</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Alex MacPhail, Marcus Becker, Elly Knight.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
