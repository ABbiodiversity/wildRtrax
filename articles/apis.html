<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="wildRtrax">
<title>APIs • wildRtrax</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="APIs">
<meta property="og:description" content="wildRtrax">
<meta property="og:image" content="https://abbiodiversity.github.io/wildRtrax/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">wildRtrax</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/introduction.html">Introduction</a>
    <a class="dropdown-item" href="../articles/audio-data-concepts.html">Audio data concepts</a>
    <a class="dropdown-item" href="../articles/apis.html">APIs</a>
    <a class="dropdown-item" href="../articles/acoustic-pre-processing.html">Acoustic pre-processing</a>
    <a class="dropdown-item" href="../articles/acoustic-data-wrangling.html">Acoustic data wrangling</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <h6 class="dropdown-header" data-toc-skip>wildRtrax 1.0.1</h6>
    <h6 class="dropdown-header" data-toc-skip>wildRtrax 1.0.0</h6>
    <h6 class="dropdown-header" data-toc-skip>wildRtrax 0.1.0</h6>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>APIs</h1>
            
      
      
      <div class="d-none name"><code>apis.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="set-up-wildtrax-credentials">Set up WildTrax credentials<a class="anchor" aria-label="anchor" href="#set-up-wildtrax-credentials"></a>
</h2>
<p>To obtain an Auth0 token, you must login into WildTrax using Auth0
(Google authorization is currently not supported). You also need to
store your WildTrax user name and password as environment variables.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Note that you need to use 'WT_USERNAME' and 'WT_PASSWORD'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>WT_USERNAME <span class="op">=</span> <span class="st">'guest'</span>, WT_PASSWORD <span class="op">=</span> <span class="st">'Apple123'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="authenticate">Authenticate<a class="anchor" aria-label="anchor" href="#authenticate"></a>
</h2>
<p>Next, you use the <code><a href="../reference/wt_auth.html">wt_auth()</a></code> function to
authenticate.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Authenticate</span></span>
<span><span class="fu"><a href="../reference/wt_auth.html">wt_auth</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Authentication into WildTrax successful.</span></span></code></pre></div>
<p>The Auth0 token you obtained will last for 12 hours. After that time,
you will need to re-authenticate.</p>
</div>
<div class="section level2">
<h2 id="making-api-calls">Making API calls<a class="anchor" aria-label="anchor" href="#making-api-calls"></a>
</h2>
<p>Once authenticated, you can now use various functions that call upon
the WildTrax API. For instance, you can use
<code><a href="../reference/wt_get_download_summary.html">wt_get_download_summary()</a></code> to see basic metadata about
projects that you can download data for.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download the project summary you have access to</span></span>
<span><span class="va">my_projects</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/wt_get_download_summary.html">wt_get_download_summary</a></span><span class="op">(</span>sensor_id <span class="op">=</span> <span class="st">'ARU'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">my_projects</span><span class="op">)</span></span>
<span><span class="co">#&gt;   organization_id organization                              project project_id</span></span>
<span><span class="co">#&gt; 1               5         ABMI ABMI Adopt-a-Camera ARU Surveys 2017         42</span></span>
<span><span class="co">#&gt; 2               1           BU          Big Grid Pilot Program 2014         32</span></span>
<span><span class="co">#&gt; 3               1           BU                            Big Grids         31</span></span>
<span><span class="co">#&gt; 4               5         ABMI                            Big Grids        381</span></span>
<span><span class="co">#&gt; 5            5273          BNP                 Bird Monitoring 2021        462</span></span>
<span><span class="co">#&gt; 6            5273          BNP                 Bird Monitoring 2022       1175</span></span>
<span><span class="co">#&gt;   sensor tasks                      status</span></span>
<span><span class="co">#&gt; 1    ARU   309 Published - Map+Report Only</span></span>
<span><span class="co">#&gt; 2    ARU   733          Published - Public</span></span>
<span><span class="co">#&gt; 3    ARU  7601          Published - Public</span></span>
<span><span class="co">#&gt; 4    ARU  2226 Published - Map+Report Only</span></span>
<span><span class="co">#&gt; 5    ARU   243 Published - Map+Report Only</span></span>
<span><span class="co">#&gt; 6    ARU   214 Published - Map+Report Only</span></span></code></pre></div>
<p>Using the project_id number in the download summary you can then use
<code><a href="../reference/wt_download_report.html">wt_download_report()</a></code> to access the species data. You can
also find the project_id number in the url of a WildTrax project,
e.g. <a href="https://www.wildtrax.ca/home/aru-tasks.html?projectId=605&amp;sensorId=ARU" class="external-link uri">https://www.wildtrax.ca/home/aru-tasks.html?projectId=605&amp;sensorId=ARU</a>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download the project report</span></span>
<span><span class="va">my_report</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/wt_download_report.html">wt_download_report</a></span><span class="op">(</span>project_id <span class="op">=</span> <span class="fl">379</span>, sensor_id <span class="op">=</span> <span class="st">'ARU'</span>, reports <span class="op">=</span> <span class="st">"main"</span>, weather_cols <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">my_report</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 30</span></span></span>
<span><span class="co">#&gt;   organization project_id location location_id location_buffer_m longitude</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ABMI                379 1000-NE        <span style="text-decoration: underline;">65</span>876              <span style="text-decoration: underline;">5</span>500     -<span style="color: #BB0000;">118.</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> ABMI                379 1000-NE        <span style="text-decoration: underline;">65</span>876              <span style="text-decoration: underline;">5</span>500     -<span style="color: #BB0000;">118.</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ABMI                379 1000-NE        <span style="text-decoration: underline;">65</span>876              <span style="text-decoration: underline;">5</span>500     -<span style="color: #BB0000;">118.</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> ABMI                379 1000-NE        <span style="text-decoration: underline;">65</span>876              <span style="text-decoration: underline;">5</span>500     -<span style="color: #BB0000;">118.</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ABMI                379 1000-NE        <span style="text-decoration: underline;">65</span>876              <span style="text-decoration: underline;">5</span>500     -<span style="color: #BB0000;">118.</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> ABMI                379 1000-NE        <span style="text-decoration: underline;">65</span>876              <span style="text-decoration: underline;">5</span>500     -<span style="color: #BB0000;">118.</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 24 more variables: latitude &lt;dbl&gt;, equipment_make &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   recording_id &lt;int&gt;, recording_date_time &lt;chr&gt;, task_id &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   aru_task_status &lt;chr&gt;, task_duration &lt;chr&gt;, task_method &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   species_code &lt;chr&gt;, species_common_name &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   species_scientific_name &lt;chr&gt;, individual_order &lt;int&gt;, tag_id &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   individual_count &lt;chr&gt;, vocalization &lt;chr&gt;, detection_time &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   tag_duration &lt;dbl&gt;, rms_peak_dbfs &lt;dbl&gt;, tag_is_verified &lt;chr&gt;, …</span></span></span></code></pre></div>
<p>An easy way to download multiple projects at once is to use
<code><a href="../reference/wt_get_download_summary.html">wt_get_download_summary()</a></code> and then filter by a substring in
order to get the project ids to download the data.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download all of the published A's Ecosystem Health ARU data to a single object</span></span>
<span><span class="va">eh_projects</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/wt_get_download_summary.html">wt_get_download_summary</a></span><span class="op">(</span>sensor_id <span class="op">=</span> <span class="st">"ARU"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">'^Ecosystem Health'</span>,<span class="va">project</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span>.x <span class="op">=</span> <span class="va">project_id</span>, .f <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="../reference/wt_download_report.html">wt_download_report</a></span><span class="op">(</span>project_id <span class="op">=</span> <span class="va">.x</span>, sensor_id <span class="op">=</span> <span class="st">"ARU"</span>, weather_cols <span class="op">=</span> <span class="cn">F</span>, reports <span class="op">=</span> <span class="st">"main"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Downloading the WildTrax species table with
<code><a href="../reference/wt_get_species.html">wt_get_species()</a></code> also grants you access to other valuable
columns or provides a complete list of the species currently supported
by WildTrax.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download the WildTrax species table</span></span>
<span><span class="va">spp_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/wt_get_species.html">wt_get_species</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">spp_table</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt;   species_id species_code species_common_name        species_class species_order</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>         64 LASNOC       Silver-haired Bat          MAMMALIA      Chiroptera   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>       <span style="text-decoration: underline;">4</span>794 4794         Canidae Family             MAMMALIA      Carnivora    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>       <span style="text-decoration: underline;">4</span>799 EACO         Eastern Cottontail         MAMMALIA      Lagomorpha   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>       <span style="text-decoration: underline;">4</span>790 AMMO         American Moose (Subspecie… MAMMALIA      Artiodactyla </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>       <span style="text-decoration: underline;">4</span>795 4795         Caprini Tribe              MAMMALIA      Artiodactyla </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>       <span style="text-decoration: underline;">4</span>833 4833         Mustelidae Family          MAMMALIA      Carnivora    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: species_scientific_name &lt;chr&gt;</span></span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Alex MacPhail, Marcus Becker, Elly Knight.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
